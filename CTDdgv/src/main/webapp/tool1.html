<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="language" content="en" />
    <meta name="author" content="CTDdgv" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>CTDdgv</title>
    <link rel="shortcut icon" href="IMAGE/c.png" type="image/x-icon">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script src="js/jquery.js"></script>
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="js/bootstrap.min.js"></script>
    <link href="css/sweetalert.css" rel="stylesheet">
    <script src="js/sweetalert.js"></script>
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/aos.css" rel="stylesheet">
    <link href="css/pattern.css" rel="stylesheet">
    <script src="js/aos.js"></script>
    <link rel="stylesheet" href="css/nice-select.css">
    <script src="js/jquery.nice-select.js"></script>
    <script src="js/swiper-bundle.js"></script>
    <script src="https://proteinpaint.stjude.org/bin/proteinpaint.js" charset="utf-8"></script>
    <!--    custom      -->
    <link href="css/index.css" rel="stylesheet">
    <link href="css/tools.css" rel="stylesheet">
    <script src="js/index.js"></script>
    <style>
        .dropdown-menu, .dropdown-menu li a{
            font-family: "Gill Sans", sans-serif;
            background-color: #599a94;
            font-size: 1.3rem;
            color: #e8e8e8 ;
            font-weight: 600;
        }
        .dropdown-menu{
            border-color: #3E6C6F;
            border-width: 1px;
            -webkit-transition: all 0.5s ease-in;
            -moz-transition: all 0.5s ease-in;
            -ms-transition: all 0.5s ease-in;
            -o-transition: all 0.5s ease-in;
            transition: all 0.5s ease-in;
        }
        .dropdown-menu a:hover{
            color: #3E6C6F !important;
            background-color: aliceblue !important;
        }
        .transp {
            background-color:transparent;
            transition: background-color 1.5s;
        }
        .notransp{
            background-image: url(IMAGE/non_index.svg);
            background-repeat: no-repeat;
            background-size: cover;
            transition: background-color 1.5s;
        }
    </style>
    </head>

    <body style="margin: 0; overflow-x: hidden;">
        <div class="container-fluid">
            <div class="row clearfix">
                <div class="col-md-12 column">
                    <!-- nav start  -->
                    <div class="row clearfix">
                        <div class="col-md-12 column">
                            <nav class="navbar navbar-default navbar-fixed-top" style="background-image:url(IMAGE/non_index.svg);background-repeat: no-repeat;  background-size: cover;border-color:transparent;" id="navigation" role="navigation">
                                <div style="width: 50%; height: 100px; position: absolute;"><a href="index.html"><img src="IMAGE/logo.svg" style="position:relative;width:50%;height:90%; display: inline-block;"></a></div>
                                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                                    <ul class="nav navbar-nav">
                                        <li>
                                            <a href="index.html">Home</a>
                                        </li>
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="background-color: transparent !important;">Curation<strong class="caret"></strong></a>
                                            <ul class="dropdown-menu">
                                                <li>
                                                    <a href="search_mo.html">Variant-orient(VL)</a>
                                                </li>
                                                <li class="divider"></li>
                                                <li>
                                                    <a href="search_fo_ml.html">Function-orient(VL)</a>
                                                </li>
                                                <li class="divider"></li>
                                                <li>
                                                    <a href="search_go.html">Gene-orient(GL)</a>
                                                </li>
                                                <li class="divider"></li>
                                                <li>
                                                    <a href="search_fo_gl.html">Function-orient(GL)</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a href="curation.html">Search</a>
                                        </li>
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="background-color: transparent !important;">Tools<strong class="caret"></strong></a>
                                            <ul class="dropdown-menu">
                                                <li>
                                                    <a href="tool1.html" class="active">geMERlb</a>
                                                </li>
                                                <li class="divider"></li>
                                                <li>
                                                    <a href="tool2.html">CTDdgv-overlap</a>
                                                </li>
                                                <li class="divider"></li>
                                                <li>
                                                    <a href="tool3.html">CTDdgv-function</a>
                                                </li>
                                                <li class="divider"></li>
                                                <li>
                                                    <a href="tool4.html">CTDdgv-survival</a>
                                                </li>
                                                <li class="divider"></li>
                                                <li>
                                                    <a href="tool5.html">CTDdgv-expression</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a href="jbrowse.html">Genome Browser</a>
                                        </li>
                                        <li>
                                            <a href="download.html">Download</a>
                                        </li>
                                        <li>
                                            <a href="submitdata.html">Submit data</a>
                                        </li>
                                        <li>
                                            <a href="helps.html">Help</a>
                                        </li>
                                    </ul>
                                </div>
                            </nav>
                        </div>
                    </div>
                    <!-- tools main   -->
                    <div class="row clearfix shift_down">
                      <div class="col-md-12 column">
                          <div id="content" class="tbox">
                              <!--      遮罩，分析提示框等辅块     -->
                              <div>
                                  <div id="center">
                                      <p id="analyse_tip">Analysing...</p>
                                      <div class="center">
                                          <div class="wave"></div>
                                          <div class="wave"></div>
                                          <div class="wave"></div>
                                          <div class="wave"></div>
                                          <div class="wave"></div>
                                          <div class="wave"></div>
                                          <div class="wave"></div>
                                          <div class="wave"></div>
                                          <div class="wave"></div>
                                          <div class="wave"></div>
                                      </div>
                                  </div>

                                  <div id="overlay" class="overlay"></div>
                                  <iframe style="width: 50%;height: 300px;" frameborder="0" name="iframeName" hidden="hidden"></iframe>
                              </div>
                              <!--      表单主块     -->
                              <div id="tools_head">
                                  <h3 class="pattern-diagonal-stripes-sm text-pattern" data-aos="flip-left" data-aos-duration="1000" data-aos-delay="1000">< geMERlb ></h3>
                                  <div class="pattern-diagonal-stripes-sm stripe"></div>
                                  <p><span class="number">1. </span><span class="emphasis">geMERlb</span> module offers a tool for identifying tumor driver genes (TDGs) and variants (TDVs). It enables users to (i) Independently upload mutation spectrums and download the analysis results by genomic element. (ii) Upload both mutation spectrum and patients' survival information concurrently, it will additionally evaluate the prognostic significance for each driver gene, illustrated through a Kaplan-Meier curve.</p>
                                  <p><span class="number">2. </span>The <span class="emphasis">Reference genome</span> is the version of the human reference genome used in mutation identification.</p>
                                  <p><span class="number">3. </span>The required <span class="emphasis">format</span> for the mutation spectrum and survival data is detailed in the example file available in the “Example” section. Please <a href="helps.html#help3_4_2"><span class="emphasis">Click here</span></a> for detailed instructions on file formatting.</p>
                                  <p><span class="number">4. </span>The <span class="emphasis">E-Mail</span> section allows users to receive notifications regarding the outcomes of their analysis. Users who have not filled in the email should avoid conducting additional operations while the analysis is in progress.</p>
                                  <p>Note: options marked with * are required.</p>
                                  <a href="helps.html#help3_4_2"><img id="wenhao" src="IMAGE/wenhao.png"></a>
                                  <div class="pattern-diagonal-stripes-sm stripe"></div>
                              </div>
                              <div id="forbid_click" class="file-submit" data-aos="zoom-in" data-aos-delay="500" data-aos-duration="1000">
                                  <div class="part_search">
                                      <div class="search_title"><img src="IMAGE/icon_upload.png"><h4>Upload File</h4></div>
                                      <div class="outside">
                                          <div class="inside">
                                              <form id="file-submit-form" target="iframeName">
                                                    <ul>
                                                       <li>
                                                           <div class="search-s-title"><img src="IMAGE/file-fill.png"><span>Choose File</span></div>
                                                           <ul>
                                                               <li class="inline-b">
                                                                   <div class="button-borders">
                                                                       <button class="primary-button" type="button" onclick="javascript:$('input[name=\'mutation\']').click();">Mutation Spectrum*</button>
                                                                   </div>
                                                                   <input class="fileshow" name="mut_file" value="A file has not been selected" readonly />
                                                                   <input type="file" id="mutation" name="mutation" style="display: none;" onchange="javascript:$('input[name=\'mut_file\']').val(value);$('input[name=\'mut_file\']').prop('size',this.value.length+6);" />
                                                               </li>
                                                               <li class="inline-b">
                                                                   <div class="button-borders">
                                                                       <button class="primary-button" type="button" onclick="javascript:$('input[name=\'survival\']').click();">Survival File</button>
                                                                   </div>
                                                                   <input class="fileshow" name="sur_file" value="A file has not been selected" readonly />
                                                                   <input type="file" id="survival" name="survival" style="display: none;" onchange="javascript:$('input[name=\'sur_file\']').val(value);$('input[name=\'sur_file\']').prop('size',this.value.length+6);" />
                                                               </li>
                                                               <li><div class="horizontal-line-divin"></div></li>
                                                           </ul>
                                                       </li>
                                                        <li>
                                                          <div class="search-s-title"><img src="IMAGE/example.png"><span>Example</span></div>
                                                          <ul>
                                                              <li>
                                                                  <a id="download_variant" download>
                                                                    <button class="example_button" type="button">
                                                                        <span class="button__text">Variant.txt</span>
                                                                        <span class="button__icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 35" id="bdd05811-e15d-428c-bb53-8661459f9307" data-name="Layer 2" class="svg"><path d="M17.5,22.131a1.249,1.249,0,0,1-1.25-1.25V2.187a1.25,1.25,0,0,1,2.5,0V20.881A1.25,1.25,0,0,1,17.5,22.131Z"></path><path d="M17.5,22.693a3.189,3.189,0,0,1-2.262-.936L8.487,15.006a1.249,1.249,0,0,1,1.767-1.767l6.751,6.751a.7.7,0,0,0,.99,0l6.751-6.751a1.25,1.25,0,0,1,1.768,1.767l-6.752,6.751A3.191,3.191,0,0,1,17.5,22.693Z"></path><path d="M31.436,34.063H3.564A3.318,3.318,0,0,1,.25,30.749V22.011a1.25,1.25,0,0,1,2.5,0v8.738a.815.815,0,0,0,.814.814H31.436a.815.815,0,0,0,.814-.814V22.011a1.25,1.25,0,1,1,2.5,0v8.738A3.318,3.318,0,0,1,31.436,34.063Z"></path></svg></span>
                                                                    </button>
                                                                  </a>
                                                                  <a id="download_survival" download>
                                                                    <button class="example_button" type="button">
                                                                      <span class="button__text">Survival.txt</span>
                                                                      <span class="button__icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 35" id="bdd05811-e15d-428c-bb53-8661459f9307" data-name="Layer 2" class="svg"><path d="M17.5,22.131a1.249,1.249,0,0,1-1.25-1.25V2.187a1.25,1.25,0,0,1,2.5,0V20.881A1.25,1.25,0,0,1,17.5,22.131Z"></path><path d="M17.5,22.693a3.189,3.189,0,0,1-2.262-.936L8.487,15.006a1.249,1.249,0,0,1,1.767-1.767l6.751,6.751a.7.7,0,0,0,.99,0l6.751-6.751a1.25,1.25,0,0,1,1.768,1.767l-6.752,6.751A3.191,3.191,0,0,1,17.5,22.693Z"></path><path d="M31.436,34.063H3.564A3.318,3.318,0,0,1,.25,30.749V22.011a1.25,1.25,0,0,1,2.5,0v8.738a.815.815,0,0,0,.814.814H31.436a.815.815,0,0,0,.814-.814V22.011a1.25,1.25,0,1,1,2.5,0v8.738A3.318,3.318,0,0,1,31.436,34.063Z"></path></svg></span>
                                                                    </button>
                                                                  </a>
                                                              </li>
                                                              <li><div class="horizontal-line-divin"></div></li>
                                                          </ul>
                                                       </li>
                                                       <li>
                                                           <div class="search-s-title"><img src="IMAGE/version-switch.png"><span>Reference Genome</span></div>
                                                           <ul>
                                                                <li>
                                                                    <div class="radio_container">
                                                                      <label>
                                                                        <input type="radio" name="hg" value="hg19" checked>
                                                                        <span>GRCH37(hg19)</span>
                                                                      </label>
                                                                      <label>
                                                                        <input type="radio" name="hg" value="hg38">
                                                                        <span>GRCH38(hg38)</span>
                                                                      </label>
                                                                    </div>
                                                                </li>
                                                                <li><div class="horizontal-line-divin"></div></li>
                                                          </ul>
                                                       </li>

                                                       <li>
                                                           <div class="search-s-title"><img src="IMAGE/mail.png"><span>E-Mail</span></div>
                                                           <ul>
                                                               <li>
                                                                   <input class="input-style" type="Email" style=";width: 23%;height: 50px;" name="mailAddress" placeholder="Input email...">
                                                               </li>
                                                           </ul>
                                                       </li>
                                                       <li>
                                                        <button id="sub" type="submit" class="sub_button"><span class="transition"></span><span class="gradient"></span><span class="label">Submit</span></button>
                                                       </li>
                                                    </ul>
                                              </form>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                              <div class="horizontal-line"></div>
                              <div id="result-show" class="part_search" style="height: auto">
                                  <div class="search_title"><img src="IMAGE/icon_result.png"><h4>Analysis Result</h4></div>
                                  <div class="outside">
                                      <div class="inside" style="height: auto">
                                            <ul>
                                              <!--  结果下载  -->
                                                <li class="re-li">
                                                  <div class="result-title"><img src="IMAGE/icon_result_downt.png"><span>Download</span></div>
                                                  <div style=" height: 90px;width: 90%;background-color: rgb(255, 255, 255);"><div id="download-div" style="margin-top: 30px;margin-left: 30px;"></div></div>
                                                </li>

                                              <!--  drivergene选择  -->
                                                <li class="re-li">
                                                    <div class="result-title"><img src="IMAGE/icon_list.png"><span>Gene list</span></div>
                                                    <div id="genelist-div" style="height: 70px;width: 90%;background-color: rgb(255, 255, 255);"></div>
                                                </li>

                                                <!--  驱动突变位点可视化  -->
                                                <li class="re-li">
                                                    <div class="result-title"><img src="IMAGE/icon_visualize.png"><span>Visualization</span></div>
                                                    <div id="geneView-div" style="width: 90%;background-color: rgb(255, 255, 255); position: relative;"></div>
                                                </li>

                                                <!--  生存结果  -->
                                                <li class="re-li">
                                                    <div class="result-title"><img src="IMAGE/icon_survivial.png"><span>Prognostic Analysis</span></div>
                                                    <div id="survival-div" style="width: 90%;background-color:rgb(255, 255, 255);"></div>
                                                </li>
                                            </ul>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                    </div>

                    <!-- footer  -->
                    <div class="row clearfix shift_down_foot">
                        <div class="col-md-12 column" style="margin: 0; padding: 0;">
                            <div class="foot">© College of Bioinformatics Science and Technology, Harbin Medical University, Harbin, China.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

                        <script>
                            AOS.init({
                                once:true,
                            });
                            //给下载按钮指定链接
                            var download_variant = document.getElementById('download_variant');
                            var download_survival = document.getElementById('download_survival');
                            // 设置 href 属性
                            download_variant.href =  'file/data/example/variant.txt';
                            download_survival.href = 'file/data/example/survival.txt';
                            //分析时禁止用户操作及加半透明遮罩层
                            const targetDiv = document.getElementById('forbid_click');

                            // 禁止目标div内所有子元素的交互
                            function disableDivChildren() {
                                //分析进行中提醒
                                //const analyse_tip = document.getElementById('analyse_tip');
                                //analyse_tip.style.display = "block";
                                //遮罩层
                                const overlay = document.getElementById('overlay');
                                overlay.style.display = 'block';
                                //块型加载框
                                const center = document.getElementById('center');
                                center.style.display = 'block';
                                //元素不可点击状态切换
                                const children = targetDiv.children;
                                for (let i = 0; i < children.length; i++) {
                                    children[i].style.pointerEvents = 'none';
                                }
                            }

                            // 允许目标div内所有子元素的交互
                            function enableDivChildren() {
                                //隐藏分析中提醒
                                //const analyse_tip = document.getElementById('analyse_tip');
                                //analyse_tip.style.display = "none";
                                //遮罩层
                                const overlay = document.getElementById('overlay');
                                overlay.style.display = 'none';
                                //块型加载框
                                const center = document.getElementById('center');
                                center.style.display = 'none';
                                //元素不可点击切换
                                const children = targetDiv.children;
                                for (let i = 0; i < children.length; i++) {
                                    children[i].style.pointerEvents = 'auto';
                                }
                            }


                            //表单提交添加监听器
                            document.getElementById('sub').addEventListener('click', submitXML);
                            function submitXML(){
                                var fileInput = $('#mutation').get(0).files[0];
                                console.info(fileInput);
                                if(fileInput){
                                    submitForm()
                                    disableDivChildren();
                                }else{
                                    console.log("shibai")
                                    Swal.fire({
                                        icon: 'error',
                                        title: 'Oops...',
                                        text: 'Variant spectrum is necessary(*)!',
                                    })
                                }

                            }
                            //生存执行函数
                            function survivalShow(element){
                                $("#survival-div").empty().append("<image style='width: 600px;height: 500px; margin-top: 90px; margin-bottom: 90px; margin-left: 150px; -webkit-box-shadow: 2px 4px 11px #737373; -moz-box-shadow: 2px 4px 11px #737373;' src='"+element+"'>"+
                                "<a href='"+element + "' style='margin-left: 15px;' download><button class=\"example_button\" type=\"button\">"+
                                " <span class=\"button__text\">Downlaod</span>"+
                                "<span class=\"button__icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 35 35\" id=\"bdd05811-e15d-428c-bb53-8661459f9307\" data-name=\"Layer 2\" class=\"svg\"><path d=\"M17.5,22.131a1.249,1.249,0,0,1-1.25-1.25V2.187a1.25,1.25,0,0,1,2.5,0V20.881A1.25,1.25,0,0,1,17.5,22.131Z\"></path><path d=\"M17.5,22.693a3.189,3.189,0,0,1-2.262-.936L8.487,15.006a1.249,1.249,0,0,1,1.767-1.767l6.751,6.751a.7.7,0,0,0,.99,0l6.751-6.751a1.25,1.25,0,0,1,1.768,1.767l-6.752,6.751A3.191,3.191,0,0,1,17.5,22.693Z\"></path><path d=\"M31.436,34.063H3.564A3.318,3.318,0,0,1,.25,30.749V22.011a1.25,1.25,0,0,1,2.5,0v8.738a.815.815,0,0,0,.814.814H31.436a.815.815,0,0,0,.814-.814V22.011a1.25,1.25,0,1,1,2.5,0v8.738A3.318,3.318,0,0,1,31.436,34.063Z\"></path></svg></span>\n" +
                                "                                                    </button>\n" +
                                "                                                </a>");
                            }

                            function geneView(gene){
                                $("#geneView-div").empty();
                                runproteinpaint(gene);
                            }
                            function submitForm() {
                                // 创建FormData对象
                                var formData = new FormData();

                                // 将文件添加到FormData对象中
                                var mutation = document.getElementsByName('mutation');
                                var survival = document.getElementsByName('survival');
                                var hg = $('input[name="hg"]:checked').val();
                                var mailAdd = $('input[name="mailAddress"]').val();
                                formData.append('mutation', mutation[0].files[0]);
                                formData.append('survival', survival[0].files[0]);
                                formData.append('hg', hg);
                                formData.append('mailAddress', mailAdd);
                                // 打印FormData对象的内容
                                // 发送Ajax请求
                                debugger
                                $.ajax({
                                    url: "analyseResult",
                                    type: 'POST',
                                    data: formData,
                                    dataType: "json",
                                    processData: false,
                                    contentType: false,
                                    success: function(response) {
                                        console.log(response);
                                        console.log("返回成功");
                                        enableDivChildren();
                                        switch (response.code){
                                            case "100":
                                                document.getElementById('result-show').style.display = "block";
                                                if (response.elementList.length > 0) {
                                                    $("#download-div").empty();
                                                    for (var i = 0; i < response.elementList.length; i++) {
                                                        var str = response.elementList[i].split("_")[0];
                                                        if(str == 'splice'){
                                                            str = 'splice_site';
                                                        }
                                                        $("#download-div").append("<a href='"+ response.pathToAnalysis+"results/"+response.uuid+"/element_hot_mutation/"+response.elementList[i] + ".txt' download><button class=\"example_button\" type=\"button\">"+
                                                            " <span class=\"button__text\">"+str+"</span>"+
                                                            "<span class=\"button__icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 35 35\" id=\"bdd05811-e15d-428c-bb53-8661459f9307\" data-name=\"Layer 2\" class=\"svg\"><path d=\"M17.5,22.131a1.249,1.249,0,0,1-1.25-1.25V2.187a1.25,1.25,0,0,1,2.5,0V20.881A1.25,1.25,0,0,1,17.5,22.131Z\"></path><path d=\"M17.5,22.693a3.189,3.189,0,0,1-2.262-.936L8.487,15.006a1.249,1.249,0,0,1,1.767-1.767l6.751,6.751a.7.7,0,0,0,.99,0l6.751-6.751a1.25,1.25,0,0,1,1.768,1.767l-6.752,6.751A3.191,3.191,0,0,1,17.5,22.693Z\"></path><path d=\"M31.436,34.063H3.564A3.318,3.318,0,0,1,.25,30.749V22.011a1.25,1.25,0,0,1,2.5,0v8.738a.815.815,0,0,0,.814.814H31.436a.815.815,0,0,0,.814-.814V22.011a1.25,1.25,0,1,1,2.5,0v8.738A3.318,3.318,0,0,1,31.436,34.063Z\"></path></svg></span>\n" +
                                                            "                                                    </button>\n" +
                                                            "                                                </a>");
                                                    }
                                                }
                                                //生成基因下拉列表
                                                $("#genelist-div").empty().append("<select id='geneList' class=\"wide form-control\"></select>")
                                                //给第一个基因添加到select，并设置为默认激活选项
                                                var newGene =  $('<option>').text(response.geneList[0]).attr("selected", "selected");
                                                $('#geneList').append(newGene);
                                                for(var i=1;i <= response.geneList.length; i++) {
                                                    var newGene =  $('<option>').text(response.geneList[i]);
                                                    $('#geneList').append(newGene);
                                                }
                                                $('select').niceSelect();
                                                //给所有基因holder属性重新赋值,使能执行js选择器
                                                var keys = Object.keys(response.visual);
                                                for (var i = 0; i < keys.length; i++) {
                                                    response.visual[keys[i]].holder = document.getElementById('geneView-div');
                                                }

                                                //显示默认可视化基因
                                                $("#geneView-div").empty();
                                                let gene_visual_100 = response.geneList[0]
                                                runproteinpaint(response.visual[gene_visual_100]);
                                                console.log(response.visual[gene_visual_100]);

                                                //当下拉列表选中基因时展示对应生存和基因view
                                                $('#geneList').on('change', function() {
                                                    var selectedText = $(this).find('option:selected').text();
                                                    // 在这里执行相应的操作，例如调用一个函数
                                                    geneView(response.visual[selectedText]);
                                                });
                                                break;
                                            case "101":
                                                document.getElementById('result-show').style.display = "block";
                                                //提供下载链接
                                                //<a href="http://localhost:8080tools.html" download>
                                                //    <button className="example_button" type="button">
                                                 //       <span className="button__text">Variant</span>
                                                 //       <span className="button__icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 35" id="bdd05811-e15d-428c-bb53-8661459f9307" data-name="Layer 2" className="svg"><path d="M17.5,22.131a1.249,1.249,0,0,1-1.25-1.25V2.187a1.25,1.25,0,0,1,2.5,0V20.881A1.25,1.25,0,0,1,17.5,22.131Z"></path><path d="M17.5,22.693a3.189,3.189,0,0,1-2.262-.936L8.487,15.006a1.249,1.249,0,0,1,1.767-1.767l6.751,6.751a.7.7,0,0,0,.99,0l6.751-6.751a1.25,1.25,0,0,1,1.768,1.767l-6.752,6.751A3.191,3.191,0,0,1,17.5,22.693Z"></path><path d="M31.436,34.063H3.564A3.318,3.318,0,0,1,.25,30.749V22.011a1.25,1.25,0,0,1,2.5,0v8.738a.815.815,0,0,0,.814.814H31.436a.815.815,0,0,0,.814-.814V22.011a1.25,1.25,0,1,1,2.5,0v8.738A3.318,3.318,0,0,1,31.436,34.063Z"></path></svg></span>
                                                 //   </button>
                                               // </a>
                                                if (response.elementList.length > 0) {
                                                    $("#download-div").empty();
                                                    for (var i = 0; i < response.elementList.length; i++) {
                                                        var str = response.elementList[i].split("_")[0];
                                                        if(str == 'splice'){
                                                            str = 'splice_site';
                                                        }
                                                        $("#download-div").append("<a href='" + response.pathToAnalysis+"results/"+response.uuid+"/element_hot_mutation/"+response.elementList[i] + ".txt' download><button class=\"example_button\" type=\"button\">"+
                                                        " <span class=\"button__text\">"+str+"</span>"+
                                                        "<span class=\"button__icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 35 35\" id=\"bdd05811-e15d-428c-bb53-8661459f9307\" data-name=\"Layer 2\" class=\"svg\"><path d=\"M17.5,22.131a1.249,1.249,0,0,1-1.25-1.25V2.187a1.25,1.25,0,0,1,2.5,0V20.881A1.25,1.25,0,0,1,17.5,22.131Z\"></path><path d=\"M17.5,22.693a3.189,3.189,0,0,1-2.262-.936L8.487,15.006a1.249,1.249,0,0,1,1.767-1.767l6.751,6.751a.7.7,0,0,0,.99,0l6.751-6.751a1.25,1.25,0,0,1,1.768,1.767l-6.752,6.751A3.191,3.191,0,0,1,17.5,22.693Z\"></path><path d=\"M31.436,34.063H3.564A3.318,3.318,0,0,1,.25,30.749V22.011a1.25,1.25,0,0,1,2.5,0v8.738a.815.815,0,0,0,.814.814H31.436a.815.815,0,0,0,.814-.814V22.011a1.25,1.25,0,1,1,2.5,0v8.738A3.318,3.318,0,0,1,31.436,34.063Z\"></path></svg></span>\n" +
                                                            "                                                    </button>\n" +
                                                            "                                                </a>");
                                                    }
                                                }

                                              //  if (response.elementList.length > 0) {
                                               //     $("#download-div").empty();
                                               //     for (var i = 0; i < response.elementList.length; i++) {
                                                //        $("#download-div").append("<span class='download-span'>"+response.elementList[i]+"</span><a href='" +window.location.origin + response.pathToAnalysis+"results/"+response.uuid+"/element_filter/"+response.elementList[i] + ".txt' download><img src=\"IMAGE/icon_result_download.png\"></a>");
                                               //     }
                                               // }
                                                //生成基因下拉列表
                                                $("#genelist-div").empty().append("<select id='geneList' class=\"wide form-control\"></select>")
                                                //给第一个基因添加到select，并设置为默认激活选项
                                                var newGene =  $('<option>').text(response.geneList[0]).val(response.pathToAnalysis+"survivals/"+response.uuid+"/"+response.geneList[0]+".png").attr("selected", "selected");
                                                $('#geneList').append(newGene);
                                                for(var i=1;i <= response.geneList.length; i++) {
                                                    var newGene =  $('<option>').text(response.geneList[i]).val(response.pathToAnalysis+"survivals/"+response.uuid+"/"+response.geneList[i]+".png");
                                                    $('#geneList').append(newGene);
                                                }
                                                $('select').niceSelect();

                                                //显示默认生存图
                                                $("#survival-div").empty().append("<image style='width: 600px;height: 600px;  margin-top: 90px; margin-bottom: 90px; margin-left: 150px; -webkit-box-shadow: 2px 4px 11px #737373; -moz-box-shadow: 2px 4px 11px #737373;' src='" + response.pathToAnalysis+"survivals/"+response.uuid+"/"+response.geneList[0]+".png"+"'>" +
                                                    "<a href='"+ response.pathToAnalysis+"survivals/"+response.uuid+"/"+response.geneList[0] + ".png"+ "' style='margin-left: 15px;' download><button class=\"example_button\" type=\"button\">"+
                                                    " <span class=\"button__text\">Downlaod</span>"+
                                                    "<span class=\"button__icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 35 35\" id=\"bdd05811-e15d-428c-bb53-8661459f9307\" data-name=\"Layer 2\" class=\"svg\"><path d=\"M17.5,22.131a1.249,1.249,0,0,1-1.25-1.25V2.187a1.25,1.25,0,0,1,2.5,0V20.881A1.25,1.25,0,0,1,17.5,22.131Z\"></path><path d=\"M17.5,22.693a3.189,3.189,0,0,1-2.262-.936L8.487,15.006a1.249,1.249,0,0,1,1.767-1.767l6.751,6.751a.7.7,0,0,0,.99,0l6.751-6.751a1.25,1.25,0,0,1,1.768,1.767l-6.752,6.751A3.191,3.191,0,0,1,17.5,22.693Z\"></path><path d=\"M31.436,34.063H3.564A3.318,3.318,0,0,1,.25,30.749V22.011a1.25,1.25,0,0,1,2.5,0v8.738a.815.815,0,0,0,.814.814H31.436a.815.815,0,0,0,.814-.814V22.011a1.25,1.25,0,1,1,2.5,0v8.738A3.318,3.318,0,0,1,31.436,34.063Z\"></path></svg></span>\n" +
                                                    "                                                    </button>\n" +
                                                    "                                                </a>")

                                                //给所有基因holder属性重新赋值,使能执行js选择器
                                                var keys = Object.keys(response.visual);
                                                for (var i = 0; i < keys.length; i++) {
                                                    response.visual[keys[i]].holder = document.getElementById('geneView-div');
                                                }

                                                //显示默认可视化基因
                                                $("#geneView-div").empty();
                                                let gene_visual = response.geneList[0]
                                                runproteinpaint(response.visual[gene_visual]);
                                                console.log(response.visual[gene_visual]);

                                                //当下拉列表选中基因是展示对应生存和基因view
                                                $('#geneList').on('change', function() {
                                                    var selectedValue = $(this).val();
                                                    var selectedText = $(this).find('option:selected').text();
                                                    // 在这里执行相应的操作，例如调用一个函数
                                                    survivalShow(selectedValue);
                                                    geneView(response.visual[selectedText]);
                                                });
                                                break;

                                            case "102":
                                                Swal.fire({
                                                    icon: 'error',
                                                    title: 'Oops...',
                                                    text: response.message,
                                                })
                                            case "103":
                                                Swal.fire({
                                                    icon: 'error',
                                                    title: 'Oops...',
                                                    text: response.message,
                                                })
                                            case "104":
                                                Swal.fire({
                                                    icon: 'error',
                                                    title: 'Oops...',
                                                    text: response.message,
                                                })

                                        }
                                    },
                                    error: function(xhr, status, error) {
                                        // 请求失败处理逻辑
                                        console.log("失败");
                                        enableDivChildren();
                                        Swal.fire({
                                            icon: 'error',
                                            title: 'Oops...',
                                            text: "Submission failed",
                                        })
                                    }
                                });

                            }
                            </script>

    </body>
</html>